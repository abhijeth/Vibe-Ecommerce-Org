{{define "content"}}
<div class="products-container">
    <h2>Our Products</h2>
    
    {{if not .IsLoggedIn}}
    <div class="guest-notice">
        <p><strong>ðŸ‘‹ Welcome Guest!</strong> You can browse products, but you'll need to <a href="/login">login</a> or <a href="/register">register</a> to add items to your cart.</p>
    </div>
    {{end}}
    
    <div class="products-grid">
        {{range .Products}}
        <div class="product-card">
            {{if .ImageURL}}
                <img src="{{.ImageURL}}" alt="{{.Name}}" class="product-image">
            {{else}}
                <div class="product-image-placeholder">No Image</div>
            {{end}}
            <div class="product-info">
                <h3>{{.Name}}</h3>
                <p>{{.Description}}</p>
                <p class="price">${{printf "%.2f" .Price}}</p>
                {{if .IsLoggedIn}}
                <form method="POST" action="/cart/add">
                    <input type="hidden" name="product_id" value="{{.ID}}">
                    <input type="number" name="quantity" value="1" min="1" class="quantity-input">
                    <button type="submit" class="btn btn-primary">Add to Cart</button>
                </form>
                {{else}}
                <div class="guest-action">
                    <a href="/login" class="btn btn-secondary">Login to Add to Cart</a>
                </div>
                {{end}}
            </div>
        </div>
        {{end}}
    </div>
</div>
{{end}} 